{"ast":null,"code":"import _objectSpread from\"C:/Users/Nikesh/Desktop/GuessWhere/guesswhere/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Nikesh/Desktop/GuessWhere/guesswhere/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useContext}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import{AppBar,Toolbar,Typography,Button,IconButton}from\"@material-ui/core/\";import firebase from\"../firebase\";import{AuthContext}from\"../AuthProvider\";import{useHistory}from\"react-router-dom\";import ClickAwayListener from\"@material-ui/core/ClickAwayListener\";import Grow from\"@material-ui/core/Grow\";import Paper from\"@material-ui/core/Paper\";import Popper from\"@material-ui/core/Popper\";import MenuItem from\"@material-ui/core/MenuItem\";import MenuList from\"@material-ui/core/MenuList\";import MenuIcon from\"@material-ui/icons/Menu\";var db=firebase.firestore();var useStyles=makeStyles(function(theme){return{root1:{display:\"flex\",\"z-index\":\"1\"},paper:{marginRight:theme.spacing(2)},root2:{flexGrow:1,\"margin-bottom\":\"2%\"},loggedin:{display:\"flex\",\"align-items\":\"center\"},home:{\"margin-right\":\"75%\"}};});export default function GuessWhereBar(){var classes=useStyles();var history=useHistory();var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var anchorRef=React.useRef(null);var handleToggle=function handleToggle(){setOpen(function(prevOpen){return!prevOpen;});};var handleClose=function handleClose(event){if(anchorRef.current&&anchorRef.current.contains(event.target)){return;}setOpen(false);};function handleListKeyDown(event){if(event.key===\"Tab\"){event.preventDefault();setOpen(false);}}// return focus to the button when we transitioned from !open -> open\nvar prevOpen=React.useRef(open);React.useEffect(function(){if(prevOpen.current===true&&open===false){anchorRef.current.focus();}prevOpen.current=open;},[open]);console.log(currentUser);var onLogin=function onLogin(){var provider=new firebase.auth.GoogleAuthProvider();firebase.auth().signInWithPopup(provider).then(function(result){var user=result.user;db.collection(\"Users\").doc(user.uid).set({name:user.displayName},{merge:true});}).catch(function(error){// Handle Errors here.\nvar errorCode=error.code;var errorMessage=error.message;// The email of the user's account used.\nvar email=error.email;// The firebase.auth.AuthCredential type that was used.\nvar credential=error.credential;// ...\n});};var browseChallenges=function browseChallenges(){history.push(\"/Browse\");setOpen(false);};var playRandomChallenge=function playRandomChallenge(){history.push(\"/Random\");setOpen(false);};var logOut=function logOut(){var auth=new firebase.auth();auth.signOut();};return/*#__PURE__*/_jsx(\"div\",{className:classes.root2,children:/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(Typography,{style:{fontStyle:\"initial\",color:\"black\",fontWeight:\"bold\"},variant:\"h6\",className:classes.home,children:\"GuessWhere\"}),currentUser?/*#__PURE__*/_jsxs(\"div\",{className:classes.root1,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(IconButton,{ref:anchorRef,\"aria-controls\":open?\"menu-list-grow\":undefined,\"aria-haspopup\":\"true\",onClick:handleToggle,children:/*#__PURE__*/_jsx(MenuIcon,{})}),/*#__PURE__*/_jsx(Popper,{open:open,anchorEl:anchorRef.current,role:undefined,transition:true,disablePortal:true,children:function children(_ref){var TransitionProps=_ref.TransitionProps,placement=_ref.placement;return/*#__PURE__*/_jsx(Grow,_objectSpread(_objectSpread({},TransitionProps),{},{style:{transformOrigin:placement===\"bottom\"?\"center top\":\"center bottom\"},children:/*#__PURE__*/_jsx(Paper,{children:/*#__PURE__*/_jsx(ClickAwayListener,{onClickAway:handleClose,children:/*#__PURE__*/_jsxs(MenuList,{autoFocusItem:open,id:\"menu-list-grow\",onKeyDown:handleListKeyDown,children:[/*#__PURE__*/_jsx(MenuItem,{onClick:browseChallenges,children:\"Browse Challenges\"}),/*#__PURE__*/_jsx(MenuItem,{onClick:playRandomChallenge,children:\"Random Challenge\"}),/*#__PURE__*/_jsx(MenuItem,{onClick:logOut,children:\"Logout\"})]})})})}));}})]}),/*#__PURE__*/_jsx(Typography,{style:{fontStyle:\"initial\",color:\"black\",fontWeight:\"bold\"},variant:\"h6\",children:currentUser.displayName})]}):/*#__PURE__*/_jsx(Button,{color:\"inherit\",onClick:onLogin,children:\"Login\"})]})})});}","map":{"version":3,"sources":["C:/Users/Nikesh/Desktop/GuessWhere/guesswhere/src/Components/GuessWhereBar.js"],"names":["React","useContext","makeStyles","AppBar","Toolbar","Typography","Button","IconButton","firebase","AuthContext","useHistory","ClickAwayListener","Grow","Paper","Popper","MenuItem","MenuList","MenuIcon","db","firestore","useStyles","theme","root1","display","paper","marginRight","spacing","root2","flexGrow","loggedin","home","GuessWhereBar","classes","history","currentUser","useState","open","setOpen","anchorRef","useRef","handleToggle","prevOpen","handleClose","event","current","contains","target","handleListKeyDown","key","preventDefault","useEffect","focus","console","log","onLogin","provider","auth","GoogleAuthProvider","signInWithPopup","then","result","user","collection","doc","uid","set","name","displayName","merge","catch","error","errorCode","code","errorMessage","message","email","credential","browseChallenges","push","playRandomChallenge","logOut","signOut","fontStyle","color","fontWeight","undefined","TransitionProps","placement","transformOrigin"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  Button,\r\n  IconButton,\r\n} from \"@material-ui/core/\";\r\nimport firebase from \"../firebase\";\r\nimport { AuthContext } from \"../AuthProvider\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\r\nimport Grow from \"@material-ui/core/Grow\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Popper from \"@material-ui/core/Popper\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport MenuList from \"@material-ui/core/MenuList\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\n\r\nconst db = firebase.firestore();\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root1: {\r\n    display: \"flex\",\r\n    \"z-index\": \"1\",\r\n  },\r\n  paper: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  root2: {\r\n    flexGrow: 1,\r\n    \"margin-bottom\": \"2%\",\r\n  },\r\n  loggedin: {\r\n    display: \"flex\",\r\n    \"align-items\": \"center\",\r\n  },\r\n  home: {\r\n    \"margin-right\": \"75%\",\r\n  },\r\n}));\r\n\r\nexport default function GuessWhereBar() {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { currentUser } = useContext(AuthContext);\r\n  const [open, setOpen] = React.useState(false);\r\n  const anchorRef = React.useRef(null);\r\n\r\n  const handleToggle = () => {\r\n    setOpen((prevOpen) => !prevOpen);\r\n  };\r\n\r\n  const handleClose = (event) => {\r\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\r\n      return;\r\n    }\r\n\r\n    setOpen(false);\r\n  };\r\n\r\n  function handleListKeyDown(event) {\r\n    if (event.key === \"Tab\") {\r\n      event.preventDefault();\r\n      setOpen(false);\r\n    }\r\n  }\r\n\r\n  // return focus to the button when we transitioned from !open -> open\r\n  const prevOpen = React.useRef(open);\r\n  React.useEffect(() => {\r\n    if (prevOpen.current === true && open === false) {\r\n      anchorRef.current.focus();\r\n    }\r\n\r\n    prevOpen.current = open;\r\n  }, [open]);\r\n  console.log(currentUser);\r\n  const onLogin = () => {\r\n    var provider = new firebase.auth.GoogleAuthProvider();\r\n    firebase\r\n      .auth()\r\n      .signInWithPopup(provider)\r\n      .then(function (result) {\r\n        var user = result.user;\r\n        db.collection(\"Users\")\r\n          .doc(user.uid)\r\n          .set({ name: user.displayName }, { merge: true });\r\n      })\r\n      .catch(function (error) {\r\n        // Handle Errors here.\r\n        var errorCode = error.code;\r\n        var errorMessage = error.message;\r\n        // The email of the user's account used.\r\n        var email = error.email;\r\n        // The firebase.auth.AuthCredential type that was used.\r\n        var credential = error.credential;\r\n        // ...\r\n      });\r\n  };\r\n\r\n  const browseChallenges = () => {\r\n    history.push(`/Browse`);\r\n    setOpen(false);\r\n  };\r\n\r\n  const playRandomChallenge = () => {\r\n    history.push(`/Random`);\r\n    setOpen(false);\r\n  };\r\n\r\n  const logOut = () => {\r\n    var auth = new firebase.auth();\r\n    auth.signOut();\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root2}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <Typography style={{fontStyle:\"initial\", color:\"black\", fontWeight:\"bold\"}} variant=\"h6\"  className={classes.home}>\r\n            GuessWhere\r\n          </Typography>\r\n          {currentUser ? (\r\n            <div className={classes.root1}>\r\n              <div>\r\n                <IconButton\r\n                  ref={anchorRef}\r\n                  aria-controls={open ? \"menu-list-grow\" : undefined}\r\n                  aria-haspopup=\"true\"\r\n                  onClick={handleToggle}\r\n                >\r\n                  <MenuIcon />\r\n                </IconButton>\r\n                <Popper\r\n                  open={open}\r\n                  anchorEl={anchorRef.current}\r\n                  role={undefined}\r\n                  transition\r\n                  disablePortal\r\n                >\r\n                  {({ TransitionProps, placement }) => (\r\n                    <Grow\r\n                      {...TransitionProps}\r\n                      style={{\r\n                        transformOrigin:\r\n                          placement === \"bottom\"\r\n                            ? \"center top\"\r\n                            : \"center bottom\",\r\n                      }}\r\n                    >\r\n                      <Paper>\r\n                        <ClickAwayListener onClickAway={handleClose}>\r\n                          <MenuList\r\n                            autoFocusItem={open}\r\n                            id=\"menu-list-grow\"\r\n                            onKeyDown={handleListKeyDown}\r\n                          >\r\n                            <MenuItem onClick={browseChallenges}>\r\n                              Browse Challenges\r\n                            </MenuItem>\r\n                            <MenuItem onClick={playRandomChallenge}>\r\n                              Random Challenge\r\n                            </MenuItem>\r\n                            <MenuItem onClick={logOut}>Logout</MenuItem>\r\n                          </MenuList>\r\n                        </ClickAwayListener>\r\n                      </Paper>\r\n                    </Grow>\r\n                  )}\r\n                </Popper>\r\n              </div>\r\n              <Typography style={{fontStyle:\"initial\", color:\"black\", fontWeight:\"bold\"}} variant=\"h6\">{currentUser.displayName}</Typography>\r\n            </div>\r\n          ) : (\r\n            <Button color=\"inherit\" onClick={onLogin}>\r\n              Login\r\n            </Button>\r\n          )}\r\n        </Toolbar>\r\n      </AppBar>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}