{"ast":null,"code":"import _slicedToArray from\"C:/Users/Nikesh/Desktop/GuessWhere/guesswhere/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Button,makeStyles,Modal}from\"@material-ui/core\";import React,{useContext,useEffect,useState}from\"react\";import{GoogleMap,useLoadScript,Marker}from\"@react-google-maps/api\";import{Redirect}from\"react-router-dom\";import{AuthContext}from\"../AuthProvider\";var useStyles=makeStyles(function(theme){return{paper:{position:\"absolute\",width:400,backgroundColor:theme.palette.background.paper,border:\"2px solid #000\",boxShadow:theme.shadows[5],padding:theme.spacing(2,4,3)}};});function getModalStyle(){var top=50;var left=50;return{top:\"\".concat(top,\"%\"),margin:\"auto\",left:\"\".concat(left,\"%\"),transform:\"translate(-\".concat(top,\"%, -\").concat(left,\"%)\")};}var mapContainerStyle={height:\"25vh\",width:\"25vw\"};var options={disableDefaultUI:true,zoomControl:true};var center={lat:39.693649,lng:-100.548059};function AddSubChallengeModal(props){var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;var _useLoadScript=useLoadScript({googleMapsApiKey:process.env.REACT_APP_GOOGLE_MAPS_API_KEY}),isLoaded=_useLoadScript.isLoaded,loadError=_useLoadScript.loadError;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),marker=_useState2[0],setMarker=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),buttonDisabled=_useState4[0],setButtonDisabled=_useState4[1];var classes=useStyles();var _React$useState=React.useState(getModalStyle),_React$useState2=_slicedToArray(_React$useState,1),modalStyle=_React$useState2[0];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),files=_React$useState4[0],setFiles=_React$useState4[1];var handleUpload=function handleUpload(event){var tempfiles=[];for(var i=0;i<event.target.files.length;i++){var file=event.target.files[i];tempfiles.push(file);}setFiles(tempfiles);};var handleMapClick=function handleMapClick(event){setMarker({lat:event.latLng.lat(),lng:event.latLng.lng()});};var resetModal=function resetModal(){setFiles([]);setMarker(null);setButtonDisabled(true);};var closeModal=function closeModal(){resetModal();props.handleClose();};var handleSubmit=function handleSubmit(){props.onSubmit(files,marker);resetModal();props.handleClose();};useEffect(function(){if(files.length!==0&&marker!==null){setButtonDisabled(false);}},[marker,files]);if(!currentUser){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}if(loadError)return\"Error\";if(!isLoaded)return\"Loading...\";return/*#__PURE__*/_jsx(Modal,{open:props.open,onClose:closeModal,\"aria-labelledby\":\"simple-modal-title\",\"aria-describedby\":\"simple-modal-description\",children:/*#__PURE__*/_jsxs(\"div\",{style:modalStyle,className:classes.paper,children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Add Sub Challenge \"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Add images:\",files.map(function(file,i){return/*#__PURE__*/_jsx(\"div\",{children:file.name},i);}),/*#__PURE__*/_jsx(\"input\",{accept:\"image/*\",className:classes.input,style:{display:\"none\"},id:\"upload-images\",multiple:true,type:\"file\",onChange:handleUpload}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"upload-images\",children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",component:\"span\",className:classes.button,children:\"Choose Images\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:\" Add location \"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(GoogleMap,{mapContainerStyle:mapContainerStyle,zoom:3,center:center,onClick:handleMapClick,children:/*#__PURE__*/_jsx(Marker,{position:marker,icon:{url:\"/Images/flag.png\",origin:new window.google.maps.Point(0,0),anchor:new window.google.maps.Point(15,15),scaledSize:new window.google.maps.Size(30,30)}})})}),/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"contained\",onClick:closeModal,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{color:\"primary\",variant:\"contained\",disabled:buttonDisabled,onClick:handleSubmit,children:\"Submit\"})]})});}export default AddSubChallengeModal;","map":{"version":3,"sources":["C:/Users/Nikesh/Desktop/GuessWhere/guesswhere/src/Components/AddSubChallengeModal.js"],"names":["Button","makeStyles","Modal","React","useContext","useEffect","useState","GoogleMap","useLoadScript","Marker","Redirect","AuthContext","useStyles","theme","paper","position","width","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","getModalStyle","top","left","margin","transform","mapContainerStyle","height","options","disableDefaultUI","zoomControl","center","lat","lng","AddSubChallengeModal","props","currentUser","googleMapsApiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","isLoaded","loadError","marker","setMarker","buttonDisabled","setButtonDisabled","classes","modalStyle","files","setFiles","handleUpload","event","tempfiles","i","target","length","file","push","handleMapClick","latLng","resetModal","closeModal","handleClose","handleSubmit","onSubmit","open","map","name","input","display","button","url","origin","window","google","maps","Point","anchor","scaledSize","Size"],"mappings":"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","sourcesContent":["import { Button, makeStyles, Modal } from \"@material-ui/core\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { GoogleMap, useLoadScript, Marker } from \"@react-google-maps/api\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { AuthContext } from \"../AuthProvider\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    position: \"absolute\",\r\n    width: 400,\r\n    backgroundColor: theme.palette.background.paper,\r\n    border: \"2px solid #000\",\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 4, 3),\r\n  },\r\n}));\r\n\r\nfunction getModalStyle() {\r\n  const top = 50;\r\n  const left = 50;\r\n\r\n  return {\r\n    top: `${top}%`,\r\n    margin: \"auto\",\r\n    left: `${left}%`,\r\n    transform: `translate(-${top}%, -${left}%)`,\r\n  };\r\n}\r\n\r\nconst mapContainerStyle = {\r\n  height: \"25vh\",\r\n  width: \"25vw\",\r\n};\r\nconst options = {\r\n  disableDefaultUI: true,\r\n  zoomControl: true,\r\n};\r\nconst center = {\r\n  lat: 39.693649,\r\n  lng: -100.548059,\r\n};\r\n\r\nfunction AddSubChallengeModal(props) {\r\n  const { currentUser } = useContext(AuthContext);\r\n\r\n  const { isLoaded, loadError } = useLoadScript({\r\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY,\r\n  });\r\n  const [marker, setMarker] = useState(null);\r\n  const [buttonDisabled, setButtonDisabled] = useState(true);\r\n\r\n  const classes = useStyles();\r\n  const [modalStyle] = React.useState(getModalStyle);\r\n  const [files, setFiles] = React.useState([]);\r\n\r\n  const handleUpload = (event) => {\r\n    var tempfiles = [];\r\n    for (var i = 0; i < event.target.files.length; i++) {\r\n      const file = event.target.files[i];\r\n      tempfiles.push(file);\r\n    }\r\n    setFiles(tempfiles);\r\n  };\r\n\r\n  const handleMapClick = (event) => {\r\n    setMarker({\r\n      lat: event.latLng.lat(),\r\n      lng: event.latLng.lng(),\r\n    });\r\n  };\r\n\r\n  const resetModal = () => {\r\n    setFiles([]);\r\n    setMarker(null);\r\n    setButtonDisabled(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    resetModal();\r\n    props.handleClose();\r\n  };\r\n  const handleSubmit = () => {\r\n    props.onSubmit(files, marker);\r\n    resetModal();\r\n    props.handleClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (files.length !== 0 && marker !== null) {\r\n      setButtonDisabled(false);\r\n    }\r\n  }, [marker, files]);\r\n  if (!currentUser) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n  if (loadError) return \"Error\";\r\n  if (!isLoaded) return \"Loading...\";\r\n  return (\r\n    <Modal\r\n      open={props.open}\r\n      onClose={closeModal}\r\n      aria-labelledby=\"simple-modal-title\"\r\n      aria-describedby=\"simple-modal-description\"\r\n    >\r\n      <div style={modalStyle} className={classes.paper}>\r\n        <h2> Add Sub Challenge </h2>\r\n        <div>\r\n          Add images:\r\n          {files.map((file, i) => (\r\n            <div key={i}>{file.name}</div>\r\n          ))}\r\n          <input\r\n            accept=\"image/*\"\r\n            className={classes.input}\r\n            style={{ display: \"none\" }}\r\n            id=\"upload-images\"\r\n            multiple\r\n            type=\"file\"\r\n            onChange={handleUpload}\r\n          />\r\n          <label htmlFor=\"upload-images\">\r\n            <Button\r\n              variant=\"outlined\"\r\n              component=\"span\"\r\n              className={classes.button}\r\n            >\r\n              Choose Images\r\n            </Button>\r\n          </label>\r\n        </div>\r\n        <div> Add location </div>\r\n        <div>\r\n          <GoogleMap\r\n            mapContainerStyle={mapContainerStyle}\r\n            zoom={3}\r\n            center={center}\r\n            onClick={handleMapClick}\r\n          >\r\n            <Marker\r\n              position={marker}\r\n              icon={{\r\n                url: `/Images/flag.png`,\r\n                origin: new window.google.maps.Point(0, 0),\r\n                anchor: new window.google.maps.Point(15, 15),\r\n                scaledSize: new window.google.maps.Size(30, 30),\r\n              }}\r\n            />\r\n          </GoogleMap>\r\n        </div>\r\n        <Button color=\"primary\" variant=\"contained\" onClick={closeModal}>\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          disabled={buttonDisabled}\r\n          onClick={handleSubmit}\r\n        >\r\n          Submit\r\n        </Button>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default AddSubChallengeModal;\r\n"]},"metadata":{},"sourceType":"module"}